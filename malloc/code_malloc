#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    FILE *file = fopen("malloc.txt", "w");

    for (int count = 2; count <= 268435456; count = count * 2) {
        clock_t start = clock();
        int* ptr = (int*) malloc(count * sizeof(int)); 
        clock_t end = clock();
        double time = (double)(end - start) / CLOCKS_PER_SEC;

        printf("malloc %lu %f   ", count * sizeof(int), time);
        fprintf(file, "malloc %lu %f   ", count * sizeof(int), time);

        start = clock();
        free(ptr);
        end = clock();
        time = (double)(end - start) / CLOCKS_PER_SEC;
        printf("free %lu %f\n", count * sizeof(int), time);
        fprintf(file, "free %lu %f\n", count * sizeof(int), time);
    }
    fclose(file);
    return 0;
}
